---
import type { Locale } from "../i18n/locales";
import type { Translations } from "../i18n/schema";
import type { TradeId } from "../data/trades";

interface Props {
  id: number;
  name: string;
  trade: TradeId;
  rating: number;
  reviews: number;
  hourlyRate: number;
  location: string;
  experience: number;
  verified: boolean;
  image: string;
  bio: string;
  skills: string[];
  availabilityKey?: keyof Translations["availability"];
  locale: Locale;
  t: Translations;
}

const {
  id,
  name,
  trade,
  rating,
  reviews,
  hourlyRate,
  location,
  experience,
  verified,
  image,
  bio,
  skills,
  availabilityKey,
  locale,
  t,
} = Astro.props;
---

<a
  href={`/profile/${id}`}
  class="bg-white rounded-xl overflow-hidden border border-gray-200 hover:shadow-xl transition-all group block"
>
  <div class="p-6">
    <div class="flex items-start justify-between mb-4">
      <div class="flex items-center">
        <div
          class="w-16 h-16 bg-gradient-to-br from-[#E07A5F] to-[#F4A261] rounded-full flex items-center justify-center text-3xl"
        >
          {image}
        </div>
        <div class="ml-4">
          <h3
            class="font-bold text-gray-900 text-lg group-hover:text-[#E07A5F] transition-colors"
          >
            {name}
          </h3>

          <div class="flex items-center text-sm text-gray-600 mt-1">
            {location}
          </div>

          <div class="text-sm text-gray-500 mt-1">
            {t.trades[trade]}
          </div>
        </div>
      </div>

      {
        verified && (
          <div class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium">
            {t.browse.verified}
          </div>
        )
      }
    </div>

    <div class="flex items-center justify-between mb-3">
      <div class="flex items-center">
        <span class="ml-1 font-bold text-gray-900">{rating}</span>
        <span class="ml-1 text-gray-500 text-sm">({reviews})</span>
      </div>
      <div class="text-right">
        <div class="text-2xl font-bold text-gray-900">${hourlyRate}</div>
        <div class="text-xs text-gray-500">{t.browse.perHour}</div>
      </div>
    </div>

    <p class="text-gray-600 text-sm mb-3 line-clamp-2">{bio}</p>

    <div class="text-sm text-gray-500 mb-3">
      {experience}
      {t.browse.experience}
    </div>

    <div class="flex flex-wrap gap-2">
      {
        skills
          .slice(0, 3)
          .map((skill) => (
            <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium">
              {skill}
            </span>
          ))
      }
    </div>
  </div>

  {
    availabilityKey && (
      <div class="bg-gray-50 px-6 py-3 border-t border-gray-100">
        <div class="text-sm text-gray-600">
          {t.availability[availabilityKey]}
        </div>
      </div>
    )
  }
</a>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
